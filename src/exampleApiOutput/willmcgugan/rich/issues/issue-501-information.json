{"url":"https://api.github.com/repos/willmcgugan/rich/issues/501","repository_url":"https://api.github.com/repos/willmcgugan/rich","labels_url":"https://api.github.com/repos/willmcgugan/rich/issues/501/labels{/name}","comments_url":"https://api.github.com/repos/willmcgugan/rich/issues/501/comments","events_url":"https://api.github.com/repos/willmcgugan/rich/issues/501/events","html_url":"https://github.com/willmcgugan/rich/issues/501","id":767826389,"node_id":"MDU6SXNzdWU3Njc4MjYzODk=","number":501,"title":"[BUG] Output is hard-wrapped when passed through a pipe","user":{"login":"acabal","id":866144,"node_id":"MDQ6VXNlcjg2NjE0NA==","avatar_url":"https://avatars0.githubusercontent.com/u/866144?v=4","gravatar_id":"","url":"https://api.github.com/users/acabal","html_url":"https://github.com/acabal","followers_url":"https://api.github.com/users/acabal/followers","following_url":"https://api.github.com/users/acabal/following{/other_user}","gists_url":"https://api.github.com/users/acabal/gists{/gist_id}","starred_url":"https://api.github.com/users/acabal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acabal/subscriptions","organizations_url":"https://api.github.com/users/acabal/orgs","repos_url":"https://api.github.com/users/acabal/repos","events_url":"https://api.github.com/users/acabal/events{/privacy}","received_events_url":"https://api.github.com/users/acabal/received_events","type":"User","site_admin":false},"labels":[{"id":2200581776,"node_id":"MDU6TGFiZWwyMjAwNTgxNzc2","url":"https://api.github.com/repos/willmcgugan/rich/labels/Needs%20triage","name":"Needs triage","color":"bfdadc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2020-12-15T16:59:22Z","updated_at":"2020-12-15T22:27:58Z","closed_at":"2020-12-15T22:27:58Z","author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\nThis might be a duplicate of #119 but I'm opening it just in case because of the new `soft_wrap` option.\r\n\r\nWe are piping output from a program using Rich (specifically a Rich table) to another program. [Rich was correctly soft-wrapping when not being piped, but hard-wrapping at 80 chars when piped.](https://github.com/standardebooks/tools/issues/382) This makes it hard to process output through a pipe, because usually in a pipe we don't want any wrapping at all and we don't know in advance how wide the output might be. (In our case we always want the output to be as wide as the user's terminal, because the output is very verbose.)\r\n\r\nI tried passing `force_terminal`, both `True` and `False`, to `Console()` and the newer `soft_wrap=True` option to `console.print()` but neither did what I was expecting, and piped output was still hard-wrapped.\r\n\r\nUsing `COLUMNS` isn't a great solution because we don't want any wrapping and we don't know how long the output might be.\r\n\r\nIs `soft_wrap` supposed to solve this, and maybe there is a bug when using it to print tables? Or is this just not possible at all?\r\n\r\nIf `soft_wrap` is meant to solve this, then we can simply detect if we're in a pipe and pass that option accordingly. But if not, it would be very helpful to be able to specify `really_no_hard_wrapping_at_all_please` for cases like this. Piping output is a common use case and it is surprising to have output soft-wrapped at the CLI but hard-wrapped in a pipe.\r\n\r\n**To Reproduce**\r\n```python\r\nconsole = Console()\r\n\r\ntable = Table(show_header=True, header_style=\"bold\", show_lines=True)\r\ntable.add_column(\"Code\", width=5, no_wrap=True)\r\ntable.add_column(\"Severity\", no_wrap=True)\r\ntable.add_column(\"File\", no_wrap=True)\r\ntable.add_column(\"Message\")\r\n\r\ntable.add_row(\"m-123\", \"Manual Review\", \"test.xhtml\", \"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100\")\r\n\r\nconsole.print(table, soft_wrap=True)\r\n```\r\n\r\nThen, run that program with `./path/to/program.py` to observe the expected output, and `./path/to/program.py | cat` to observe hard-wrapping.\r\n\r\n![Screenshot from 2020-12-15 10-51-23](https://user-images.githubusercontent.com/866144/102245740-88d2e700-3ec3-11eb-8cd9-1829e58d5f49.png)\r\n\r\n**Platform**\r\n\r\n- Ubuntu 20.04\r\n\r\n- GNOME Terminal\r\n\r\n- Rich 9.4.0\r\n\r\n","closed_by":{"login":"acabal","id":866144,"node_id":"MDQ6VXNlcjg2NjE0NA==","avatar_url":"https://avatars0.githubusercontent.com/u/866144?v=4","gravatar_id":"","url":"https://api.github.com/users/acabal","html_url":"https://github.com/acabal","followers_url":"https://api.github.com/users/acabal/followers","following_url":"https://api.github.com/users/acabal/following{/other_user}","gists_url":"https://api.github.com/users/acabal/gists{/gist_id}","starred_url":"https://api.github.com/users/acabal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acabal/subscriptions","organizations_url":"https://api.github.com/users/acabal/orgs","repos_url":"https://api.github.com/users/acabal/repos","events_url":"https://api.github.com/users/acabal/events{/privacy}","received_events_url":"https://api.github.com/users/acabal/received_events","type":"User","site_admin":false},"performed_via_github_app":null}