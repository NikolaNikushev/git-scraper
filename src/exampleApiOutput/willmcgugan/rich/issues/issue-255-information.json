{"url":"https://api.github.com/repos/willmcgugan/rich/issues/255","repository_url":"https://api.github.com/repos/willmcgugan/rich","labels_url":"https://api.github.com/repos/willmcgugan/rich/issues/255/labels{/name}","comments_url":"https://api.github.com/repos/willmcgugan/rich/issues/255/comments","events_url":"https://api.github.com/repos/willmcgugan/rich/issues/255/events","html_url":"https://github.com/willmcgugan/rich/issues/255","id":685725413,"node_id":"MDU6SXNzdWU2ODU3MjU0MTM=","number":255,"title":"Unittest test_pretty.py::test_pretty fails on i586 systems (openSUSE Tumbleweed)","user":{"login":"mnhauke","id":4259039,"node_id":"MDQ6VXNlcjQyNTkwMzk=","avatar_url":"https://avatars3.githubusercontent.com/u/4259039?v=4","gravatar_id":"","url":"https://api.github.com/users/mnhauke","html_url":"https://github.com/mnhauke","followers_url":"https://api.github.com/users/mnhauke/followers","following_url":"https://api.github.com/users/mnhauke/following{/other_user}","gists_url":"https://api.github.com/users/mnhauke/gists{/gist_id}","starred_url":"https://api.github.com/users/mnhauke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mnhauke/subscriptions","organizations_url":"https://api.github.com/users/mnhauke/orgs","repos_url":"https://api.github.com/users/mnhauke/repos","events_url":"https://api.github.com/users/mnhauke/events{/privacy}","received_events_url":"https://api.github.com/users/mnhauke/received_events","type":"User","site_admin":false},"labels":[{"id":1809645463,"node_id":"MDU6TGFiZWwxODA5NjQ1NDYz","url":"https://api.github.com/repos/willmcgugan/rich/labels/accepted","name":"accepted","color":"c5def5","default":false,"description":"Task was accepted"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-08-25T19:16:18Z","updated_at":"2020-10-10T13:49:39Z","closed_at":"2020-10-10T13:49:39Z","author_association":"NONE","active_lock_reason":null,"body":"With the latest version bump I noticed that one test fails on i586 systems.\r\nAt least versions 6.0.0 and 5.2.1 are affected. The same test runs fine on x86_64 systems.\r\n\r\nUnittest `test_pretty.py::test_pretty` fails:\r\n```\r\n[   10s] =================================== FAILURES ===================================\r\n[   10s] _________________________________ test_pretty __________________________________\r\n[   10s] \r\n[   10s]     def test_pretty():\r\n[   10s]         test = {\r\n[   10s]             \"foo\": [1, 2, 3, {4, 5, 6, (7, 8, 9)}, {}],\r\n[   10s]             \"bar\": {\"egg\": \"baz\", \"words\": [\"Hello World\"] * 10},\r\n[   10s]             False: \"foo\",\r\n[   10s]             True: \"\",\r\n[   10s]             \"text\": (\"Hello World\", \"foo bar baz egg\"),\r\n[   10s]         }\r\n[   10s]     \r\n[   10s]         result = pretty_repr(test, max_width=80)\r\n[   10s]         print(result)\r\n[   10s]         print(repr(result))\r\n[   10s]         expected = \"{\\n    'foo': [1, 2, 3, {(7, 8, 9), 4, 5, 6}, {}],\\n    'bar': {\\n        'egg': 'baz',\\n        'words': [\\n            'Hello World',\\n            'Hello World',\\n            'Hello World',\\n            'Hello World',\\n            'Hello World',\\n            'Hello World',\\n            'Hello World',\\n            'Hello World',\\n            'Hello World',\\n            'Hello World'\\n        ]\\n    },\\n    False: 'foo',\\n    True: '',\\n    'text': ('Hello World', 'foo bar baz egg')\\n}\"\r\n[   10s] >       assert result == expected\r\n[   10s] E       assert ('{\\n'\\n \"    'foo': [1, 2, 3, {4, 5, 6, (7, 8, 9)}, {}],\\n\"\\n \"    'bar': {\\n\"\\n \"        'egg': 'baz',\\n\"\\n \"        'words': [\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World'\\n\"\\n '        ]\\n'\\n '    },\\n'\\n \"    False: 'foo',\\n\"\\n \"    True: '',\\n\"\\n \"    'text': ('Hello World', 'foo bar baz egg')\\n\"\\n '}') == ('{\\n'\\n \"    'foo': [1, 2, 3, {(7, 8, 9), 4, 5, 6}, {}],\\n\"\\n \"    'bar': {\\n\"\\n \"        'egg': 'baz',\\n\"\\n \"        'words': [\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World',\\n\"\\n \"            'Hello World'\\n\"\\n '        ]\\n'\\n '    },\\n'\\n \"    False: 'foo',\\n\"\\n \"    True: '',\\n\"\\n \"    'text': ('Hello World', 'foo bar baz egg')\\n\"\\n '}')\r\n[   10s] E           {\r\n[   10s] E         -     'foo': [1, 2, 3, {(7, 8, 9), 4, 5, 6}, {}],\r\n[   10s] E         ?                                ---------\r\n[   10s] E         +     'foo': [1, 2, 3, {4, 5, 6, (7, 8, 9)}, {}],\r\n[   10s] E         ?                       +++++++++\r\n[   10s] E               'bar': {\r\n[   10s] E                   'egg': 'baz',\r\n[   10s] E                   'words': [\r\n[   10s] E                       'Hello World',\r\n[   10s] E                       'Hello World',\r\n[   10s] E                       'Hello World',\r\n[   10s] E                       'Hello World',\r\n[   10s] E                       'Hello World',\r\n[   10s] E                       'Hello World',\r\n[   10s] E                       'Hello World',\r\n[   10s] E                       'Hello World',\r\n[   10s] E                       'Hello World',\r\n[   10s] E                       'Hello World'\r\n[   10s] E                   ]\r\n[   10s] E               },\r\n[   10s] E               False: 'foo',\r\n[   10s] E               True: '',\r\n[   10s] E               'text': ('Hello World', 'foo bar baz egg')\r\n[   10s] E           }\r\n[   10s] \r\n[   10s] tests/test_pretty.py:32: AssertionError\r\n[   10s] ----------------------------- Captured stdout call -----------------------------\r\n[   10s] {\r\n[   10s]     'foo': [1, 2, 3, {4, 5, 6, (7, 8, 9)}, {}],\r\n[   10s]     'bar': {\r\n[   10s]         'egg': 'baz',\r\n[   10s]         'words': [\r\n[   10s]             'Hello World',\r\n[   10s]             'Hello World',\r\n[   10s]             'Hello World',\r\n[   10s]             'Hello World',\r\n[   10s]             'Hello World',\r\n[   10s]             'Hello World',\r\n[   10s]             'Hello World',\r\n[   10s]             'Hello World',\r\n[   10s]             'Hello World',\r\n[   10s]             'Hello World'\r\n[   10s]         ]\r\n[   10s]     },\r\n[   10s]     False: 'foo',\r\n[   10s]     True: '',\r\n[   10s]     'text': ('Hello World', 'foo bar baz egg')\r\n[   10s] }\r\n[   10s] \"{\\n    'foo': [1, 2, 3, {4, 5, 6, (7, 8, 9)}, {}],\\n    'bar': {\\n        'egg': 'baz',\\n        'words': [\\n            'Hello World',\\n            'Hello World',\\n            'Hello World',\\n            'Hello World',\\n            'Hello World',\\n            'Hello World',\\n            'Hello World',\\n            'Hello World',\\n            'Hello World',\\n            'Hello World'\\n        ]\\n    },\\n    False: 'foo',\\n    True: '',\\n    'text': ('Hello World', 'foo bar baz egg')\\n}\"\r\n[   10s] =========================== short test summary info ============================\r\n[   10s] FAILED tests/test_pretty.py::test_pretty - assert ('{\\n'\\n \"    'foo': [1, 2,...\r\n[   10s] ======================== 1 failed, 291 passed in 2.83s =========================\r\n\r\n```\r\n\r\n\r\n**i586 full buildlog (with failures):**\r\nhttps://build.opensuse.org/package/live_build_log/devel:languages:python/python-rich/openSUSE_Tumbleweed/i586\r\nlocal copy\r\n[openSUSE_Tumbleweed-i586-python-rich-buildlog.txt](https://github.com/willmcgugan/rich/files/5125817/openSUSE_Tumbleweed-i586-python-rich-buildlog.txt)\r\n**x86_64 full buildlog**\r\nhttps://build.opensuse.org/package/live_build_log/devel:languages:python/python-rich/openSUSE_Tumbleweed/x86_64\r\n","closed_by":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"performed_via_github_app":null}