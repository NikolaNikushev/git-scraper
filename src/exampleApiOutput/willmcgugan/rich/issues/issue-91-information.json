{"url":"https://api.github.com/repos/willmcgugan/rich/issues/91","repository_url":"https://api.github.com/repos/willmcgugan/rich","labels_url":"https://api.github.com/repos/willmcgugan/rich/issues/91/labels{/name}","comments_url":"https://api.github.com/repos/willmcgugan/rich/issues/91/comments","events_url":"https://api.github.com/repos/willmcgugan/rich/issues/91/events","html_url":"https://github.com/willmcgugan/rich/pull/91","id":623842001,"node_id":"MDExOlB1bGxSZXF1ZXN0NDIyMzk2Nzc4","number":91,"title":"Attempt at solving progress bar deadlock","user":{"login":"eulertour","id":43117506,"node_id":"MDQ6VXNlcjQzMTE3NTA2","avatar_url":"https://avatars1.githubusercontent.com/u/43117506?v=4","gravatar_id":"","url":"https://api.github.com/users/eulertour","html_url":"https://github.com/eulertour","followers_url":"https://api.github.com/users/eulertour/followers","following_url":"https://api.github.com/users/eulertour/following{/other_user}","gists_url":"https://api.github.com/users/eulertour/gists{/gist_id}","starred_url":"https://api.github.com/users/eulertour/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eulertour/subscriptions","organizations_url":"https://api.github.com/users/eulertour/orgs","repos_url":"https://api.github.com/users/eulertour/repos","events_url":"https://api.github.com/users/eulertour/events{/privacy}","received_events_url":"https://api.github.com/users/eulertour/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-05-24T11:03:46Z","updated_at":"2020-05-24T21:18:59Z","closed_at":"2020-05-24T12:14:33Z","author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/willmcgugan/rich/pulls/91","html_url":"https://github.com/willmcgugan/rich/pull/91","diff_url":"https://github.com/willmcgugan/rich/pull/91.diff","patch_url":"https://github.com/willmcgugan/rich/pull/91.patch"},"body":"## Type of changes\r\n\r\n- [X] Bug fix\r\n- [ ] New feature\r\n- [ ] Documentation / docstrings\r\n- [ ] Tests\r\n- [ ] Other\r\n\r\n## Checklist\r\n\r\n- [X] I've run the latest [black](https://github.com/ambv/black) with default args on new code.\r\n- [ ] I've updated CHANGELOG.md and CONTRIBUTORS.md where appropriate.\r\n- [ ] I've added tests for new code.\r\n- [X] I accept that @willmcgugan may be pedantic in the code review.\r\n\r\n## Description\r\n\r\nThis is my attempt at solving #90 by controlling access to `Progress._tasks` and `Progress._refresh_count` with a separate lock. I haven't been able to reproduce a deadlock after applying this change, but it's hard to tell if there are any errors without more knowledge of which data races the original lock is meant to prevent (I noticed for instance that the `Progress.tasks` property didn't acquire the original lock, which leads me to believe read races on that data are permissible).","closed_by":{"login":"eulertour","id":43117506,"node_id":"MDQ6VXNlcjQzMTE3NTA2","avatar_url":"https://avatars1.githubusercontent.com/u/43117506?v=4","gravatar_id":"","url":"https://api.github.com/users/eulertour","html_url":"https://github.com/eulertour","followers_url":"https://api.github.com/users/eulertour/followers","following_url":"https://api.github.com/users/eulertour/following{/other_user}","gists_url":"https://api.github.com/users/eulertour/gists{/gist_id}","starred_url":"https://api.github.com/users/eulertour/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eulertour/subscriptions","organizations_url":"https://api.github.com/users/eulertour/orgs","repos_url":"https://api.github.com/users/eulertour/repos","events_url":"https://api.github.com/users/eulertour/events{/privacy}","received_events_url":"https://api.github.com/users/eulertour/received_events","type":"User","site_admin":false},"performed_via_github_app":null}