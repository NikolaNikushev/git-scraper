[{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/683429500","html_url":"https://github.com/willmcgugan/rich/issues/258#issuecomment-683429500","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/258","id":683429500,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzQyOTUwMA==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-08-30T14:48:03Z","updated_at":"2020-08-30T14:48:03Z","author_association":"OWNER","body":"Hi AndrÃ©,\r\n\r\nI agree this would be a nice feature, but it would have to be optional. There's no way to specify the lexer with inline code, so I wouldn't want to presume.\r\n\r\nI don't see any way to implement this without a patch to the Markdown class, but the good new is I don't think its a big change. The [Syntax._highlight](https://github.com/willmcgugan/rich/blob/master/rich/syntax.py#L176-L189) method returns a Text instance with syntax highlighting applied. That could be adapted to style the inline text in the Markdown class, probably somewhere [here](https://github.com/willmcgugan/rich/blob/master/rich/markdown.py#L461).\r\n\r\nI think it would be worthwhile to implement this, but I'm taking a short break from Rich. If you would like to tackle it yourself and submit a PR I could advise...\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/683429999","html_url":"https://github.com/willmcgugan/rich/issues/258#issuecomment-683429999","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/258","id":683429999,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzQyOTk5OQ==","user":{"login":"aroberge","id":629698,"node_id":"MDQ6VXNlcjYyOTY5OA==","avatar_url":"https://avatars2.githubusercontent.com/u/629698?v=4","gravatar_id":"","url":"https://api.github.com/users/aroberge","html_url":"https://github.com/aroberge","followers_url":"https://api.github.com/users/aroberge/followers","following_url":"https://api.github.com/users/aroberge/following{/other_user}","gists_url":"https://api.github.com/users/aroberge/gists{/gist_id}","starred_url":"https://api.github.com/users/aroberge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aroberge/subscriptions","organizations_url":"https://api.github.com/users/aroberge/orgs","repos_url":"https://api.github.com/users/aroberge/repos","events_url":"https://api.github.com/users/aroberge/events{/privacy}","received_events_url":"https://api.github.com/users/aroberge/received_events","type":"User","site_admin":false},"created_at":"2020-08-30T14:52:29Z","updated_at":"2020-08-30T14:52:29Z","author_association":"NONE","body":"Hi Will,\r\n\r\nThanks for your prompt response. You certainly deserve a rest after the continuous enhancements you have made to rich!\r\n\r\nI will have a look and if I can implement it as an option, I will submit a PR.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/683444179","html_url":"https://github.com/willmcgugan/rich/issues/258#issuecomment-683444179","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/258","id":683444179,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzQ0NDE3OQ==","user":{"login":"aroberge","id":629698,"node_id":"MDQ6VXNlcjYyOTY5OA==","avatar_url":"https://avatars2.githubusercontent.com/u/629698?v=4","gravatar_id":"","url":"https://api.github.com/users/aroberge","html_url":"https://github.com/aroberge","followers_url":"https://api.github.com/users/aroberge/followers","following_url":"https://api.github.com/users/aroberge/following{/other_user}","gists_url":"https://api.github.com/users/aroberge/gists{/gist_id}","starred_url":"https://api.github.com/users/aroberge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aroberge/subscriptions","organizations_url":"https://api.github.com/users/aroberge/orgs","repos_url":"https://api.github.com/users/aroberge/repos","events_url":"https://api.github.com/users/aroberge/events{/privacy}","received_events_url":"https://api.github.com/users/aroberge/received_events","type":"User","site_admin":false},"created_at":"2020-08-30T16:58:15Z","updated_at":"2020-08-30T16:58:15Z","author_association":"NONE","body":"Just for information: I've made some progress.\r\n\r\nThe output of\r\n```python\r\nfrom rich.markdown import Markdown\r\nfrom rich.console import Console\r\n\r\ntest = \"The program `print('Hello world!')` has to be test number `1`.\"\r\n\r\ncon1 = Console()\r\ncon1.print(Markdown(test))\r\n\r\ncon2 = Console(inline_code_lexer=\"python\")\r\ncon2.print(Markdown(test))\r\n```\r\nis the following:\r\n![image](https://user-images.githubusercontent.com/629698/91664839-1d0d6f80-eac8-11ea-9240-827ce05815fa.png)\r\n\r\nI hope to have some time to figure out how to make it work later tonight or tomorrow.\r\n\r\nAssuming this idea would be acceptable, would you prefer another name to `inline_code_lexer`?","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/683446418","html_url":"https://github.com/willmcgugan/rich/issues/258#issuecomment-683446418","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/258","id":683446418,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzQ0NjQxOA==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-08-30T17:18:15Z","updated_at":"2020-08-30T17:18:15Z","author_association":"OWNER","body":"Getting there!\r\n\r\n> Assuming this idea would be acceptable, would you prefer another name to inline_code_lexer?\r\n\r\nWorks for me.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/683469816","html_url":"https://github.com/willmcgugan/rich/issues/258#issuecomment-683469816","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/258","id":683469816,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzQ2OTgxNg==","user":{"login":"aroberge","id":629698,"node_id":"MDQ6VXNlcjYyOTY5OA==","avatar_url":"https://avatars2.githubusercontent.com/u/629698?v=4","gravatar_id":"","url":"https://api.github.com/users/aroberge","html_url":"https://github.com/aroberge","followers_url":"https://api.github.com/users/aroberge/followers","following_url":"https://api.github.com/users/aroberge/following{/other_user}","gists_url":"https://api.github.com/users/aroberge/gists{/gist_id}","starred_url":"https://api.github.com/users/aroberge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aroberge/subscriptions","organizations_url":"https://api.github.com/users/aroberge/orgs","repos_url":"https://api.github.com/users/aroberge/repos","events_url":"https://api.github.com/users/aroberge/events{/privacy}","received_events_url":"https://api.github.com/users/aroberge/received_events","type":"User","site_admin":false},"created_at":"2020-08-30T20:58:32Z","updated_at":"2020-08-30T20:58:32Z","author_association":"NONE","body":"I made some small progress, but I am stumped. Please note that **this is not urgent**.  I should probably put it aside for a few days as I have other work to do...\r\n\r\nI believe that I understand the logic of what I have to do but, somehow, I cannot find a way to do it.\r\nI've created a class, `InlineCode(TextElement)` which does the syntax highlighting correctly.\r\n\r\nI can use it in the markdown processing so that it correctly identifies and does the highlighting of the code.  However,\r\nI do not know how to append/insert the resulting highlighted code in the markdown text.  As a check that I am doing the highlighting correctly, I use a `yield from` statement to render the code after I do the syntax highlighting\r\n```python\r\n            elif node_type == \"code\" and options.inline_code_lexer is not None:\r\n                element_class = self.elements.get(node_type)\r\n                element = element_class.create(self, current)\r\n                context.stack.push(element)\r\n                element.on_enter(context)\r\n                element.on_text(context, current.literal)\r\n                context.stack.pop()\r\n                yield from console.render(element, context.options)\r\n                element.on_leave(context)\r\n```\r\nI do know that I am not supposed to use the yield statement there. However, I cannot find a way to insert the highlighted code at its proper place.\r\n\r\nI have added a `highlight()` method to my `InlineCode` class, based on `Syntax._highlight` so that I could get a string output, hoping that I could  insert it at the proper location. If I use it like this:\r\n\r\nIf I try to do something like\r\n```python\r\n                context.on_text(element.highlight(context))\r\n```\r\nI get a traceback with `ValueError: style must not be set when appending Text instance`.\r\nAttempting to do `context.leave_style()` before that statement does not help.\r\n\r\nAgain, please note that this is not an urgent request; I just want to record what I have done so far.\r\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/683474721","html_url":"https://github.com/willmcgugan/rich/issues/258#issuecomment-683474721","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/258","id":683474721,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzQ3NDcyMQ==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-08-30T21:47:36Z","updated_at":"2020-08-30T21:47:36Z","author_association":"OWNER","body":"I think you're on the right track, but you probably aren't going to need the extra InlineCode class or condition. The inline styles are treated differently as they are rendered within the text of the \"element\" classes. i.e. the inline code may be in inside a list context, or paragraph, or header.\r\n\r\n> context.on_text(element.highlight(context))\r\n\r\nThis should be enough to render the inline code with highlighting. The error you're getting is because this ultimately calls Text.append which can accept either a `str` plus `style` or a Text instance, but not a Text + style.\r\n\r\nI think the simplest addition to get this to work would be for on_text to grow an `node_type` parameter, then [TextElement.on_text](https://github.com/willmcgugan/rich/blob/master/rich/markdown.py#L102) can handle the special case for \"code\" types.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/691662406","html_url":"https://github.com/willmcgugan/rich/issues/258#issuecomment-691662406","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/258","id":691662406,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTY2MjQwNg==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-09-13T11:59:08Z","updated_at":"2020-09-13T11:59:08Z","author_association":"OWNER","body":"Hi @aroberge Just to let you know I've started work on this https://github.com/willmcgugan/rich/pull/277\r\n\r\nNaturally there is more to it than I initially thought!","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/691663171","html_url":"https://github.com/willmcgugan/rich/issues/258#issuecomment-691663171","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/258","id":691663171,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTY2MzE3MQ==","user":{"login":"aroberge","id":629698,"node_id":"MDQ6VXNlcjYyOTY5OA==","avatar_url":"https://avatars2.githubusercontent.com/u/629698?v=4","gravatar_id":"","url":"https://api.github.com/users/aroberge","html_url":"https://github.com/aroberge","followers_url":"https://api.github.com/users/aroberge/followers","following_url":"https://api.github.com/users/aroberge/following{/other_user}","gists_url":"https://api.github.com/users/aroberge/gists{/gist_id}","starred_url":"https://api.github.com/users/aroberge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aroberge/subscriptions","organizations_url":"https://api.github.com/users/aroberge/orgs","repos_url":"https://api.github.com/users/aroberge/repos","events_url":"https://api.github.com/users/aroberge/events{/privacy}","received_events_url":"https://api.github.com/users/aroberge/received_events","type":"User","site_admin":false},"created_at":"2020-09-13T12:06:20Z","updated_at":"2020-09-13T12:06:20Z","author_association":"NONE","body":"Thanks!  I've been really busy with my day job (as a new Academic Year begins at our university) and have not had time to look at this. I really appreciate that you are tackling it.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/692179964","html_url":"https://github.com/willmcgugan/rich/issues/258#issuecomment-692179964","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/258","id":692179964,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjE3OTk2NA==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-09-14T16:48:54Z","updated_at":"2020-09-14T16:48:54Z","author_association":"OWNER","body":"v6.2.0 has inline code highlighting in Markdown. Set `inline_code_lexer=\"python\"` on the Markdown constructor to enable it... ","performed_via_github_app":null}]