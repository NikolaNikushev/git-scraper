{"url":"https://api.github.com/repos/willmcgugan/rich/issues/360","repository_url":"https://api.github.com/repos/willmcgugan/rich","labels_url":"https://api.github.com/repos/willmcgugan/rich/issues/360/labels{/name}","comments_url":"https://api.github.com/repos/willmcgugan/rich/issues/360/comments","events_url":"https://api.github.com/repos/willmcgugan/rich/issues/360/events","html_url":"https://github.com/willmcgugan/rich/issues/360","id":716986550,"node_id":"MDU6SXNzdWU3MTY5ODY1NTA=","number":360,"title":"[BUG] 8.0.0: test failure `test_python_render`","user":{"login":"sandrotosi","id":346648,"node_id":"MDQ6VXNlcjM0NjY0OA==","avatar_url":"https://avatars2.githubusercontent.com/u/346648?v=4","gravatar_id":"","url":"https://api.github.com/users/sandrotosi","html_url":"https://github.com/sandrotosi","followers_url":"https://api.github.com/users/sandrotosi/followers","following_url":"https://api.github.com/users/sandrotosi/following{/other_user}","gists_url":"https://api.github.com/users/sandrotosi/gists{/gist_id}","starred_url":"https://api.github.com/users/sandrotosi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sandrotosi/subscriptions","organizations_url":"https://api.github.com/users/sandrotosi/orgs","repos_url":"https://api.github.com/users/sandrotosi/repos","events_url":"https://api.github.com/users/sandrotosi/events{/privacy}","received_events_url":"https://api.github.com/users/sandrotosi/received_events","type":"User","site_admin":false},"labels":[{"id":2200581776,"node_id":"MDU6TGFiZWwyMjAwNTgxNzc2","url":"https://api.github.com/repos/willmcgugan/rich/labels/Needs%20triage","name":"Needs triage","color":"bfdadc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-10-08T03:16:20Z","updated_at":"2020-10-09T20:58:52Z","closed_at":"2020-10-09T13:36:39Z","author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\nwhen building 8.0.0 on debian unstable, i get this single failure:\r\n\r\n```\r\n=================================== FAILURES ===================================\r\n______________________________ test_python_render ______________________________\r\n\r\n    def test_python_render():\r\n        syntax = Panel.fit(\r\n            Syntax(\r\n                CODE,\r\n                lexer_name=\"python\",\r\n                line_numbers=True,\r\n                line_range=(2, 10),\r\n                theme=\"foo\",\r\n                code_width=60,\r\n                word_wrap=True,\r\n            )\r\n        )\r\n        rendered_syntax = render(syntax)\r\n        print(repr(rendered_syntax))\r\n        expected = '╭────────────────────────────────────────────────────────────────╮\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 2 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m    \\x1b[0m\\x1b[3;38;2;186;33;33;48;2;248;248;248m\"\"\"Iterate and generate a tuple with a flag for first \\x1b[0m\\x1b[48;2;248;248;248m \\x1b[0m│\\n│\\x1b[48;2;248;248;248m     \\x1b[0m\\x1b[3;38;2;186;33;33;48;2;248;248;248mand last value.\"\"\"\\x1b[0m\\x1b[48;2;248;248;248m                                         \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 3 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m    \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248miter_values\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;102;102;102;48;2;248;248;248m=\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;0;128;0;48;2;248;248;248miter\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m(\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248mvalues\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m)\\x1b[0m\\x1b[48;2;248;248;248m                             \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 4 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m    \\x1b[0m\\x1b[1;38;2;0;128;0;48;2;248;248;248mtry\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m:\\x1b[0m\\x1b[48;2;248;248;248m                                                   \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 5 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m        \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248mprevious_value\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;102;102;102;48;2;248;248;248m=\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;0;128;0;48;2;248;248;248mnext\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m(\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248miter_values\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m)\\x1b[0m\\x1b[48;2;248;248;248m                 \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 6 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m    \\x1b[0m\\x1b[1;38;2;0;128;0;48;2;248;248;248mexcept\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[1;38;2;210;65;58;48;2;248;248;248mStopIteration\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m:\\x1b[0m\\x1b[48;2;248;248;248m                                  \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 7 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m        \\x1b[0m\\x1b[1;38;2;0;128;0;48;2;248;248;248mreturn\\x1b[0m\\x1b[48;2;248;248;248m                                             \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 8 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m    \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248mfirst\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;102;102;102;48;2;248;248;248m=\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[1;38;2;0;128;0;48;2;248;248;248mTrue\\x1b[0m\\x1b[48;2;248;248;248m                                           \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 9 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m    \\x1b[0m\\x1b[1;38;2;0;128;0;48;2;248;248;248mfor\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248mvalue\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[1;38;2;170;34;255;48;2;248;248;248min\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248miter_values\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m:\\x1b[0m\\x1b[48;2;248;248;248m                              \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m10 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m        \\x1b[0m\\x1b[1;38;2;0;128;0;48;2;248;248;248myield\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248mfirst\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m,\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[1;38;2;0;128;0;48;2;248;248;248mFalse\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m,\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248mprevious_value\\x1b[0m\\x1b[48;2;248;248;248m                 \\x1b[0m│\\n╰────────────────────────────────────────────────────────────────╯\\n'\r\n>       assert rendered_syntax == expected\r\nE       AssertionError: assert '╭───────────...──────────╯\\n' == '╭────────────...──────────╯\\n'\r\nE         Skipping 2559 identical leading characters in diff, use -v to show\r\nE         - 48m True                                           │\r\nE         + 48m True                                           │\r\nE         ?           ++\r\nE           │   9     for value..\r\nE         \r\nE         ...Full output truncated (5 lines hidden), use '-vv' to show\r\n\r\ntests/test_syntax.py:46: AssertionError\r\n----------------------------- Captured stdout call -----------------------------\r\n'╭────────────────────────────────────────────────────────────────╮\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 2 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m    \\x1b[0m\\x1b[3;38;2;186;33;33;48;2;248;248;248m\"\"\"Iterate and generate a tuple with a flag for first \\x1b[0m\\x1b[48;2;248;248;248m \\x1b[0m│\\n│\\x1b[48;2;248;248;248m     \\x1b[0m\\x1b[3;38;2;186;33;33;48;2;248;248;248mand last value.\"\"\"\\x1b[0m\\x1b[48;2;248;248;248m                                         \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 3 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m    \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248miter_values\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;102;102;102;48;2;248;248;248m=\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;0;128;0;48;2;248;248;248miter\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m(\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248mvalues\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m)\\x1b[0m\\x1b[48;2;248;248;248m                             \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 4 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m    \\x1b[0m\\x1b[1;38;2;0;128;0;48;2;248;248;248mtry\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m:\\x1b[0m\\x1b[48;2;248;248;248m                                                   \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 5 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m        \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248mprevious_value\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;102;102;102;48;2;248;248;248m=\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;0;128;0;48;2;248;248;248mnext\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m(\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248miter_values\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m)\\x1b[0m\\x1b[48;2;248;248;248m                 \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 6 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m    \\x1b[0m\\x1b[1;38;2;0;128;0;48;2;248;248;248mexcept\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[1;38;2;210;65;58;48;2;248;248;248mStopIteration\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m:\\x1b[0m\\x1b[48;2;248;248;248m                                  \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 7 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m        \\x1b[0m\\x1b[1;38;2;0;128;0;48;2;248;248;248mreturn\\x1b[0m\\x1b[48;2;248;248;248m                                             \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 8 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m    \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248mfirst\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;102;102;102;48;2;248;248;248m=\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;0;128;0;48;2;248;248;248mTrue\\x1b[0m\\x1b[48;2;248;248;248m                                           \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m 9 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m    \\x1b[0m\\x1b[1;38;2;0;128;0;48;2;248;248;248mfor\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248mvalue\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[1;38;2;170;34;255;48;2;248;248;248min\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248miter_values\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m:\\x1b[0m\\x1b[48;2;248;248;248m                              \\x1b[0m│\\n│\\x1b[1;38;2;24;24;24;48;2;248;248;248m  \\x1b[0m\\x1b[38;2;173;173;173;48;2;248;248;248m10 \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m        \\x1b[0m\\x1b[1;38;2;0;128;0;48;2;248;248;248myield\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248mfirst\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m,\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;0;128;0;48;2;248;248;248mFalse\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m,\\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248m \\x1b[0m\\x1b[38;2;0;0;0;48;2;248;248;248mprevious_value\\x1b[0m\\x1b[48;2;248;248;248m                 \\x1b[0m│\\n╰────────────────────────────────────────────────────────────────╯\\n'\r\n===================== 1 failed, 308 passed in 1.80 seconds =====================\r\n```\r\n\r\nalright, it's crazy hard to see (unless you print the formatted strings) but what happens is that the [`first = True`](https://github.com/willmcgugan/rich/blob/master/tests/test_syntax.py#L22) line doesnt have the `True` in bold face.\r\n\r\nRegards,\r\nSandro","closed_by":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"performed_via_github_app":null}