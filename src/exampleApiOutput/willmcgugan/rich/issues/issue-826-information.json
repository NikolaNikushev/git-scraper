{"url":"https://api.github.com/repos/willmcgugan/rich/issues/826","repository_url":"https://api.github.com/repos/willmcgugan/rich","labels_url":"https://api.github.com/repos/willmcgugan/rich/issues/826/labels{/name}","comments_url":"https://api.github.com/repos/willmcgugan/rich/issues/826/comments","events_url":"https://api.github.com/repos/willmcgugan/rich/issues/826/events","html_url":"https://github.com/willmcgugan/rich/issues/826","id":769339694,"node_id":"MDU6SXNzdWU3NjkzMzk2OTQ=","number":826,"title":"[BUG] UnicodeEncodeError from console.py","user":{"login":"bphunter1972","id":5446342,"node_id":"MDQ6VXNlcjU0NDYzNDI=","avatar_url":"https://avatars3.githubusercontent.com/u/5446342?v=4","gravatar_id":"","url":"https://api.github.com/users/bphunter1972","html_url":"https://github.com/bphunter1972","followers_url":"https://api.github.com/users/bphunter1972/followers","following_url":"https://api.github.com/users/bphunter1972/following{/other_user}","gists_url":"https://api.github.com/users/bphunter1972/gists{/gist_id}","starred_url":"https://api.github.com/users/bphunter1972/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bphunter1972/subscriptions","organizations_url":"https://api.github.com/users/bphunter1972/orgs","repos_url":"https://api.github.com/users/bphunter1972/repos","events_url":"https://api.github.com/users/bphunter1972/events{/privacy}","received_events_url":"https://api.github.com/users/bphunter1972/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-12-16T23:15:40Z","updated_at":"2020-12-17T17:21:08Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\n*Some* of my users are seeing this condition being raised from console.py's _check_buffer():\r\n\r\n```\r\n   1315                         except UnicodeEncodeError as error:\r\n   1316                             error.reason = f\"{error.reason}\\n*** You may need to add PYTHONIOENCODING=utf-8 to your environment ***\"\r\n   1317                             raise\r\n```\r\n\r\nHowever, I cannot reproduce this issue on my end. Neither I nor they have PYTHONIOENCODING set in their environments, and we are all running from a virtualenv with the same versions of Python, rich, etc.\r\n\r\nThe code generating this issue is being called as follows:\r\n\r\n```\r\nfrom rich.console import Console\r\nfrom rich.markdown import Markdown\r\n\r\nconsole = Console(highlight=False)\r\nrprint = console.print\r\n```\r\nlater...\r\n\r\n```\r\n        with open('notes.md') as notes_file:\r\n            lines = notes_file.readlines()\r\n        md = rich.Markdown(''.join(lines))\r\n        rprint(md, width=120)\r\n```\r\n\r\n**To Reproduce**\r\nA minimal code example that reproduces the problem would be a big help if you can provide it. If the issue is visual in nature, consider posting a screenshot.\r\n\r\n**Platform**\r\nLinux, Konsole\r\nrich==9.1.0\r\n","closed_by":null,"performed_via_github_app":null}