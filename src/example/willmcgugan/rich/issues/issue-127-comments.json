[{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/650539211","html_url":"https://github.com/willmcgugan/rich/issues/127#issuecomment-650539211","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/127","id":650539211,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDUzOTIxMQ==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-06-27T10:31:25Z","updated_at":"2020-06-27T10:31:25Z","author_association":"OWNER","body":"What happens if you use the builtin `print`?","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/650584799","html_url":"https://github.com/willmcgugan/rich/issues/127#issuecomment-650584799","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/127","id":650584799,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDU4NDc5OQ==","user":{"login":"mrzv","id":720816,"node_id":"MDQ6VXNlcjcyMDgxNg==","avatar_url":"https://avatars2.githubusercontent.com/u/720816?v=4","gravatar_id":"","url":"https://api.github.com/users/mrzv","html_url":"https://github.com/mrzv","followers_url":"https://api.github.com/users/mrzv/followers","following_url":"https://api.github.com/users/mrzv/following{/other_user}","gists_url":"https://api.github.com/users/mrzv/gists{/gist_id}","starred_url":"https://api.github.com/users/mrzv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrzv/subscriptions","organizations_url":"https://api.github.com/users/mrzv/orgs","repos_url":"https://api.github.com/users/mrzv/repos","events_url":"https://api.github.com/users/mrzv/events{/privacy}","received_events_url":"https://api.github.com/users/mrzv/received_events","type":"User","site_admin":false},"created_at":"2020-06-27T16:47:00Z","updated_at":"2020-06-27T16:47:00Z","author_association":"NONE","body":"Normal print works just fine: prints out the two respective ranks.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/650764187","html_url":"https://github.com/willmcgugan/rich/issues/127#issuecomment-650764187","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/127","id":650764187,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDc2NDE4Nw==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-06-28T14:01:08Z","updated_at":"2020-06-28T14:01:08Z","author_association":"OWNER","body":"I've never used MPI and it seems a pain to install, but this is unlikely to be an issue with Rich.\r\n\r\nMPI must capture output. Perhaps it's not handling the ansi control codes. If you print a number if will highlight it in bold blue. Try replacing the rich import with the following:\r\n\r\n```python\r\nfrom rich.console import Console\r\nconsole = Console()\r\nconsole.print(rank, highlight=False)\r\n```\r\n\r\nThat will disable highlighting and be equivalent to builtin print.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/650792844","html_url":"https://github.com/willmcgugan/rich/issues/127#issuecomment-650792844","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/127","id":650792844,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDc5Mjg0NA==","user":{"login":"mrzv","id":720816,"node_id":"MDQ6VXNlcjcyMDgxNg==","avatar_url":"https://avatars2.githubusercontent.com/u/720816?v=4","gravatar_id":"","url":"https://api.github.com/users/mrzv","html_url":"https://github.com/mrzv","followers_url":"https://api.github.com/users/mrzv/followers","following_url":"https://api.github.com/users/mrzv/following{/other_user}","gists_url":"https://api.github.com/users/mrzv/gists{/gist_id}","starred_url":"https://api.github.com/users/mrzv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrzv/subscriptions","organizations_url":"https://api.github.com/users/mrzv/orgs","repos_url":"https://api.github.com/users/mrzv/repos","events_url":"https://api.github.com/users/mrzv/events{/privacy}","received_events_url":"https://api.github.com/users/mrzv/received_events","type":"User","site_admin":false},"created_at":"2020-06-28T16:52:32Z","updated_at":"2020-06-28T16:52:32Z","author_association":"NONE","body":"`highlight=False` didn't help. But it's also clearly a problem with OpenMPI. If I switch to MPICH, then all the output is printed out, in all versions of the above code, but without any formatting, color, etc. Under OpenMPI, I always just get blank lines, when using rich. I haven't found a way to disable output capture, but I'll keep looking.\r\n\r\nIdeally, I'd like to find an option, where if I only output from one of the processes, I get the full output formatting. Curiously, if I run `mpirun -n 2 python -m rich`, under MPICH I get the full output formatting, twice â€” except the width is limited, compared to the full terminal. Under OpenMPI, I just get blank lines again.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/650793213","html_url":"https://github.com/willmcgugan/rich/issues/127#issuecomment-650793213","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/127","id":650793213,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDc5MzIxMw==","user":{"login":"mrzv","id":720816,"node_id":"MDQ6VXNlcjcyMDgxNg==","avatar_url":"https://avatars2.githubusercontent.com/u/720816?v=4","gravatar_id":"","url":"https://api.github.com/users/mrzv","html_url":"https://github.com/mrzv","followers_url":"https://api.github.com/users/mrzv/followers","following_url":"https://api.github.com/users/mrzv/following{/other_user}","gists_url":"https://api.github.com/users/mrzv/gists{/gist_id}","starred_url":"https://api.github.com/users/mrzv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrzv/subscriptions","organizations_url":"https://api.github.com/users/mrzv/orgs","repos_url":"https://api.github.com/users/mrzv/repos","events_url":"https://api.github.com/users/mrzv/events{/privacy}","received_events_url":"https://api.github.com/users/mrzv/received_events","type":"User","site_admin":false},"created_at":"2020-06-28T16:55:16Z","updated_at":"2020-06-28T16:55:16Z","author_association":"NONE","body":"Just to make this a little more constructive, two mysteries remain:\r\n1. Why doesn't `highlight=False` produce output under OpenMPI? If it's supposed to be equivalent to builtin print, something is not working.\r\n2. Why, under MPICH, does `mpirun -n 2 python -m rich` produce colored formatted output, but `print(rank, style='yellow')` doesn't?","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/650794380","html_url":"https://github.com/willmcgugan/rich/issues/127#issuecomment-650794380","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/127","id":650794380,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDc5NDM4MA==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-06-28T17:04:16Z","updated_at":"2020-06-28T17:04:16Z","author_association":"OWNER","body":"Try replacing print with `sys.stdout.write(\"foo\\n\")`.  If that doesn't work, then I suspect that the builtin `print` is being monkey patched somehow.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/650794824","html_url":"https://github.com/willmcgugan/rich/issues/127#issuecomment-650794824","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/127","id":650794824,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDc5NDgyNA==","user":{"login":"mrzv","id":720816,"node_id":"MDQ6VXNlcjcyMDgxNg==","avatar_url":"https://avatars2.githubusercontent.com/u/720816?v=4","gravatar_id":"","url":"https://api.github.com/users/mrzv","html_url":"https://github.com/mrzv","followers_url":"https://api.github.com/users/mrzv/followers","following_url":"https://api.github.com/users/mrzv/following{/other_user}","gists_url":"https://api.github.com/users/mrzv/gists{/gist_id}","starred_url":"https://api.github.com/users/mrzv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrzv/subscriptions","organizations_url":"https://api.github.com/users/mrzv/orgs","repos_url":"https://api.github.com/users/mrzv/repos","events_url":"https://api.github.com/users/mrzv/events{/privacy}","received_events_url":"https://api.github.com/users/mrzv/received_events","type":"User","site_admin":false},"created_at":"2020-06-28T17:07:58Z","updated_at":"2020-06-28T17:07:58Z","author_association":"NONE","body":"`sys.stdout.write` works fine.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/651224910","html_url":"https://github.com/willmcgugan/rich/issues/127#issuecomment-651224910","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/127","id":651224910,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTIyNDkxMA==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-06-29T16:22:58Z","updated_at":"2020-06-29T16:22:58Z","author_association":"OWNER","body":"Not sure what else to suggest tbh. Don't suppose you have a file called `rich.py` in your project?","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/651227246","html_url":"https://github.com/willmcgugan/rich/issues/127#issuecomment-651227246","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/127","id":651227246,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTIyNzI0Ng==","user":{"login":"mrzv","id":720816,"node_id":"MDQ6VXNlcjcyMDgxNg==","avatar_url":"https://avatars2.githubusercontent.com/u/720816?v=4","gravatar_id":"","url":"https://api.github.com/users/mrzv","html_url":"https://github.com/mrzv","followers_url":"https://api.github.com/users/mrzv/followers","following_url":"https://api.github.com/users/mrzv/following{/other_user}","gists_url":"https://api.github.com/users/mrzv/gists{/gist_id}","starred_url":"https://api.github.com/users/mrzv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrzv/subscriptions","organizations_url":"https://api.github.com/users/mrzv/orgs","repos_url":"https://api.github.com/users/mrzv/repos","events_url":"https://api.github.com/users/mrzv/events{/privacy}","received_events_url":"https://api.github.com/users/mrzv/received_events","type":"User","site_admin":false},"created_at":"2020-06-29T16:27:25Z","updated_at":"2020-06-29T16:27:25Z","author_association":"NONE","body":"No, this is a clean directory with just the above example.\r\n\r\nDo you mind installing OpenMPI and trying it yourself? On most Linux distributions and Homebrew on a Mac, it's a one-liner.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/651687945","html_url":"https://github.com/willmcgugan/rich/issues/127#issuecomment-651687945","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/127","id":651687945,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTY4Nzk0NQ==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-06-30T09:48:43Z","updated_at":"2020-06-30T09:48:43Z","author_association":"OWNER","body":"Tried on Unbuntu and OSX and I was missing some libraries.\r\n\r\nI'll give it another go at some point.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/652334578","html_url":"https://github.com/willmcgugan/rich/issues/127#issuecomment-652334578","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/127","id":652334578,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjMzNDU3OA==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-07-01T10:24:45Z","updated_at":"2020-07-01T10:27:11Z","author_association":"OWNER","body":"I've figure out what is going on. When run with MPI, the `shutil.get_terminal_size` function reports a terminal size of (0, 0). Rich wraps text to the column width, and when you wrap to a width of 0 all you are left with is blank lines.\r\n\r\nI think this must be a bug in how MPI sets the environment for processes.\r\n\r\nA workaround would be to define a `COLUMNS` environment var with your desired terminal width. Or construct Console with an explicit width.\r\n\r\n```python\r\nconsole = Console(width=80)\r\nconsole.print(rank) # This works!\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/652461328","html_url":"https://github.com/willmcgugan/rich/issues/127#issuecomment-652461328","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/127","id":652461328,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjQ2MTMyOA==","user":{"login":"mrzv","id":720816,"node_id":"MDQ6VXNlcjcyMDgxNg==","avatar_url":"https://avatars2.githubusercontent.com/u/720816?v=4","gravatar_id":"","url":"https://api.github.com/users/mrzv","html_url":"https://github.com/mrzv","followers_url":"https://api.github.com/users/mrzv/followers","following_url":"https://api.github.com/users/mrzv/following{/other_user}","gists_url":"https://api.github.com/users/mrzv/gists{/gist_id}","starred_url":"https://api.github.com/users/mrzv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mrzv/subscriptions","organizations_url":"https://api.github.com/users/mrzv/orgs","repos_url":"https://api.github.com/users/mrzv/repos","events_url":"https://api.github.com/users/mrzv/events{/privacy}","received_events_url":"https://api.github.com/users/mrzv/received_events","type":"User","site_admin":false},"created_at":"2020-07-01T14:43:43Z","updated_at":"2020-07-01T14:43:43Z","author_association":"NONE","body":"Ah, great. Thanks for figuring it out. I think this qualifies as a bug I should report upstream to OpenMPI. And the workaround is great, too.","performed_via_github_app":null}]