[{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/695762108","html_url":"https://github.com/willmcgugan/rich/issues/295#issuecomment-695762108","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/295","id":695762108,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTc2MjEwOA==","user":{"login":"ssbarnea","id":102495,"node_id":"MDQ6VXNlcjEwMjQ5NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/102495?v=4","gravatar_id":"","url":"https://api.github.com/users/ssbarnea","html_url":"https://github.com/ssbarnea","followers_url":"https://api.github.com/users/ssbarnea/followers","following_url":"https://api.github.com/users/ssbarnea/following{/other_user}","gists_url":"https://api.github.com/users/ssbarnea/gists{/gist_id}","starred_url":"https://api.github.com/users/ssbarnea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssbarnea/subscriptions","organizations_url":"https://api.github.com/users/ssbarnea/orgs","repos_url":"https://api.github.com/users/ssbarnea/repos","events_url":"https://api.github.com/users/ssbarnea/events{/privacy}","received_events_url":"https://api.github.com/users/ssbarnea/received_events","type":"User","site_admin":false},"created_at":"2020-09-20T08:49:39Z","updated_at":"2020-09-20T08:49:39Z","author_association":"CONTRIBUTOR","body":"It would be useful to disable the codecov comments on PRs, it is spammy (both email and notificationsl) and does not add any real value. We still have the action that can fail if coverage fails. I did this on several projects, is one line like https://github.com/pycontribs/jira/blob/master/codecov.yml#L2","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/696228415","html_url":"https://github.com/willmcgugan/rich/issues/295#issuecomment-696228415","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/295","id":696228415,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjIyODQxNQ==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-09-21T16:31:34Z","updated_at":"2020-09-21T16:31:34Z","author_association":"OWNER","body":"I'd accept a PR to add tox. Although I'd prefer a solution to run GH actions locally.\r\n\r\nI like the codecov reports. I wouldn't want to enforce coverage at this point. ","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/703159888","html_url":"https://github.com/willmcgugan/rich/issues/295#issuecomment-703159888","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/295","id":703159888,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMzE1OTg4OA==","user":{"login":"reillysiemens","id":3084059,"node_id":"MDQ6VXNlcjMwODQwNTk=","avatar_url":"https://avatars2.githubusercontent.com/u/3084059?v=4","gravatar_id":"","url":"https://api.github.com/users/reillysiemens","html_url":"https://github.com/reillysiemens","followers_url":"https://api.github.com/users/reillysiemens/followers","following_url":"https://api.github.com/users/reillysiemens/following{/other_user}","gists_url":"https://api.github.com/users/reillysiemens/gists{/gist_id}","starred_url":"https://api.github.com/users/reillysiemens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reillysiemens/subscriptions","organizations_url":"https://api.github.com/users/reillysiemens/orgs","repos_url":"https://api.github.com/users/reillysiemens/repos","events_url":"https://api.github.com/users/reillysiemens/events{/privacy}","received_events_url":"https://api.github.com/users/reillysiemens/received_events","type":"User","site_admin":false},"created_at":"2020-10-03T20:19:05Z","updated_at":"2020-10-03T20:19:05Z","author_association":"NONE","body":"@willmcgugan: I have a little experience working with tox and I'd be happy to add a configuration if you like. I'm interested to know more about what you mean by\r\n> I'd prefer a solution to run GH actions locally.\r\n\r\nthough. Do you mean you'd like to run whatever the GH actions run locally or do you mean you'd like to trigger a GH action from a local testing environment? :thinking: ","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/703161126","html_url":"https://github.com/willmcgugan/rich/issues/295#issuecomment-703161126","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/295","id":703161126,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMzE2MTEyNg==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-10-03T20:31:28Z","updated_at":"2020-10-03T20:31:28Z","author_association":"OWNER","body":"This [tool](https://github.com/nektos/act) can run GH Actions locally. I'm not sure how practical that is, but it's worth investigating. Otherwise, tox is a reasonable solution.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/703161848","html_url":"https://github.com/willmcgugan/rich/issues/295#issuecomment-703161848","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/295","id":703161848,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMzE2MTg0OA==","user":{"login":"reillysiemens","id":3084059,"node_id":"MDQ6VXNlcjMwODQwNTk=","avatar_url":"https://avatars2.githubusercontent.com/u/3084059?v=4","gravatar_id":"","url":"https://api.github.com/users/reillysiemens","html_url":"https://github.com/reillysiemens","followers_url":"https://api.github.com/users/reillysiemens/followers","following_url":"https://api.github.com/users/reillysiemens/following{/other_user}","gists_url":"https://api.github.com/users/reillysiemens/gists{/gist_id}","starred_url":"https://api.github.com/users/reillysiemens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reillysiemens/subscriptions","organizations_url":"https://api.github.com/users/reillysiemens/orgs","repos_url":"https://api.github.com/users/reillysiemens/repos","events_url":"https://api.github.com/users/reillysiemens/events{/privacy}","received_events_url":"https://api.github.com/users/reillysiemens/received_events","type":"User","site_admin":false},"created_at":"2020-10-03T20:38:13Z","updated_at":"2020-10-03T20:38:13Z","author_association":"NONE","body":"@willmcgugan: I'll give [`act`](https://github.com/nektos/act) a look and report back here then. For comparison, in my own project I'm [running tox through Poetry in a GH action](https://github.com/reillysiemens/ipython-style-gruvbox/blob/77518384a12e30187aeca7f50910ed154eca7c20/.github/workflows/test.yml#L22-L25) quite nicely.\r\n```yaml\r\n- name: Test\r\n  run: |\r\n    source $HOME/.poetry/env\r\n    poetry run tox -q --parallel=auto\r\n```","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/703171928","html_url":"https://github.com/willmcgugan/rich/issues/295#issuecomment-703171928","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/295","id":703171928,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMzE3MTkyOA==","user":{"login":"reillysiemens","id":3084059,"node_id":"MDQ6VXNlcjMwODQwNTk=","avatar_url":"https://avatars2.githubusercontent.com/u/3084059?v=4","gravatar_id":"","url":"https://api.github.com/users/reillysiemens","html_url":"https://github.com/reillysiemens","followers_url":"https://api.github.com/users/reillysiemens/followers","following_url":"https://api.github.com/users/reillysiemens/following{/other_user}","gists_url":"https://api.github.com/users/reillysiemens/gists{/gist_id}","starred_url":"https://api.github.com/users/reillysiemens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reillysiemens/subscriptions","organizations_url":"https://api.github.com/users/reillysiemens/orgs","repos_url":"https://api.github.com/users/reillysiemens/repos","events_url":"https://api.github.com/users/reillysiemens/events{/privacy}","received_events_url":"https://api.github.com/users/reillysiemens/received_events","type":"User","site_admin":false},"created_at":"2020-10-03T22:24:32Z","updated_at":"2020-10-03T22:27:33Z","author_association":"NONE","body":"@willmcgugan: So, I went ahead and installed/ran [`act`](https://github.com/nektos/act) locally and the results are, to put it mildly, a little confusing...\r\n```\r\n$ act pull_request\r\n...\r\n[Test Rich module/build-6] ‚≠ê  Run Set up Python ${{ matrix.python-version }}\r\n[Test Rich module/build-6]   ‚òÅ  git clone 'https://github.com/actions/setup-python' # ref=v1\r\n[Test Rich module/build-5]   üê≥  docker cp src=/home/tucker/.cache/act/actions-setup-python@v1 dst=/actions/\r\n[Test Rich module/build-4]   üê≥  docker cp src=/home/tucker/.cache/act/actions-setup-python@v1 dst=/actions/\r\n[Test Rich module/build-6]   üê≥  docker cp src=/home/tucker/.cache/act/actions-setup-python@v1 dst=/actions/\r\n[Test Rich module/build-4]   ‚ùå  Failure - Set up Python ${{ matrix.python-version }}\r\nError: lstat /home/tucker/.cache/act/actions-setup-python@v1/.gitignore: no such file or directory\r\n```\r\nGo ahead and `cd` to `/home/tucker/.cache/act/actions-setup-python@v1/` to discover...\r\n```\r\n$ git status -sb\r\n## HEAD (no branch)\r\n D .gitignore\r\n```\r\nSo, somehow this tool cloned something and then only copied part of the repo? :thinking: Looks like it might be related to nektos/act#198 and nektos/act#325 (which has not yet been resolved). That doesn't seem to me like the sort of thing that's good to work around, so I don't know if [`act`](https://github.com/nektos/act) is the best fit for local testing _for now_.\r\n\r\nAs for using [`tox`](https://tox.readthedocs.io/en/latest/), your current `Makefile` setup seems really clean and simple to me. `make` also has the advantage of being nearly ubiquitous. The one advantage I see for adding `tox` is that if you have multiple Python interpreters installed you'll be able to run local tests for all of those versions.\r\n\r\nYour [`CONTRIBUTING.md`](https://github.com/willmcgugan/rich/blob/bb1153a13decefb94d86a713e0c236222beda0f2/CONTRIBUTING.md) already has instructions for installing other dependencies like [`pytest`](https://docs.pytest.org/en/latest/) and [`poetry`](https://python-poetry.org/), so adding `tox` doesn't seem _too_ onerous to me. That said, a `tox`-centric workflow would encourage a few changes...\r\n\r\nI propose the following.\r\n\r\n1. Add `tox` and [`tox-gh-actions`](https://github.com/ymyzk/tox-gh-actions) to `pyproject.toml`'s `tool.poetry.dev-dependencies` section.\r\n2. Add a `tox.ini` file with environments with their own dependencies for\r\n   - tests\r\n   - formatting\r\n   - type checking\r\n   - docs\r\n3. Remove `requirements-dev.txt`.\r\n4. Change the `Makefile` to invoke `tox` via `poetry run ...`.\r\n5. Change `.github/workflows/pythonpackage.yml` to invoke `tox` via `poetry run ...`.\r\n6. Change `CONTRIBUTING.md`'s documentation to reflect the above\r\n   ```markdown\r\n    ## Development Environment\r\n\r\n    To start developing with Rich, first [install `poetry`](https://python-poetry.org/docs/#installation), and then run the following\r\n\r\n        poetry install\r\n   ```\r\n   after which developers should be able to either run `make test` or `poetry run tox ...` themselves.\r\n\r\nThe gist is that you should end up with a workflow where devs\r\n- don't have to manage virtual environments directly themselves,\r\n- can use `poetry` as a single entry point to the development workflow,\r\n- and if they have the right interpreters installed, test against multiple Python versions locally.\r\n\r\nIf you're cool with this, feel free to assign this issue to me and I'll get started ASAP. If you think it's too much and you'd prefer to keep the current `Makefile` workflow I wouldn't blame you at all. :sweat_smile:","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/704395166","html_url":"https://github.com/willmcgugan/rich/issues/295#issuecomment-704395166","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/295","id":704395166,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDM5NTE2Ng==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-10-06T16:24:00Z","updated_at":"2020-10-06T16:24:00Z","author_association":"OWNER","body":"@reillysiemens Thanks for looking in to that! Maybe act is not quite production ready. I had hoped it could run VMs for all platforms.\r\n\r\nPersonally I've been quite happy running `make test` a virtual. I rarely run in to any Python version differences, but occasionally platform differences. But tox may be good for other contributors to test locally.\r\n\r\n@ssbarnea Has a [PR for tox](https://github.com/willmcgugan/rich/pull/348). Feel free to comment on that.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/704401974","html_url":"https://github.com/willmcgugan/rich/issues/295#issuecomment-704401974","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/295","id":704401974,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDQwMTk3NA==","user":{"login":"ssbarnea","id":102495,"node_id":"MDQ6VXNlcjEwMjQ5NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/102495?v=4","gravatar_id":"","url":"https://api.github.com/users/ssbarnea","html_url":"https://github.com/ssbarnea","followers_url":"https://api.github.com/users/ssbarnea/followers","following_url":"https://api.github.com/users/ssbarnea/following{/other_user}","gists_url":"https://api.github.com/users/ssbarnea/gists{/gist_id}","starred_url":"https://api.github.com/users/ssbarnea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssbarnea/subscriptions","organizations_url":"https://api.github.com/users/ssbarnea/orgs","repos_url":"https://api.github.com/users/ssbarnea/repos","events_url":"https://api.github.com/users/ssbarnea/events{/privacy}","received_events_url":"https://api.github.com/users/ssbarnea/received_events","type":"User","site_admin":false},"created_at":"2020-10-06T16:36:10Z","updated_at":"2020-10-06T16:36:10Z","author_association":"CONTRIBUTOR","body":"I can assure you that act is not production ready. It only works for some specific cases. I tried to use it myself. ACT is nice but I am keep retesting it every 6 months.\r\n\r\nI did not want to touch the Makefile, but if you want I can easily convert it to call tox environments. Just let me know if you want to do that.","performed_via_github_app":null}]