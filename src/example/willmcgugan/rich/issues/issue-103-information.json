{"url":"https://api.github.com/repos/willmcgugan/rich/issues/103","repository_url":"https://api.github.com/repos/willmcgugan/rich","labels_url":"https://api.github.com/repos/willmcgugan/rich/issues/103/labels{/name}","comments_url":"https://api.github.com/repos/willmcgugan/rich/issues/103/comments","events_url":"https://api.github.com/repos/willmcgugan/rich/issues/103/events","html_url":"https://github.com/willmcgugan/rich/issues/103","id":631488719,"node_id":"MDU6SXNzdWU2MzE0ODg3MTk=","number":103,"title":"Feature request: Screen re-/storing","user":{"login":"timfi","id":30415153,"node_id":"MDQ6VXNlcjMwNDE1MTUz","avatar_url":"https://avatars2.githubusercontent.com/u/30415153?v=4","gravatar_id":"","url":"https://api.github.com/users/timfi","html_url":"https://github.com/timfi","followers_url":"https://api.github.com/users/timfi/followers","following_url":"https://api.github.com/users/timfi/following{/other_user}","gists_url":"https://api.github.com/users/timfi/gists{/gist_id}","starred_url":"https://api.github.com/users/timfi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timfi/subscriptions","organizations_url":"https://api.github.com/users/timfi/orgs","repos_url":"https://api.github.com/users/timfi/repos","events_url":"https://api.github.com/users/timfi/events{/privacy}","received_events_url":"https://api.github.com/users/timfi/received_events","type":"User","site_admin":false},"labels":[{"id":1668492275,"node_id":"MDU6TGFiZWwxNjY4NDkyMjc1","url":"https://api.github.com/repos/willmcgugan/rich/labels/enhancement","name":"enhancement","color":"a2eeef","default":true,"description":"New feature or request"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2020-06-05T10:33:00Z","updated_at":"2020-11-30T16:05:36Z","closed_at":"2020-11-30T16:05:36Z","author_association":"NONE","active_lock_reason":null,"body":"I've been playing around with `rich` as of late and I am really enjoying it. :+1:\r\nBut there is one thing I wish was also in this wonderful chuck of code and that would be the ability to programmatically store and restore the terminal view (Like how `less` and other common commandline utilities do). I've got a somewhat working version of a decorator that I am using in my current project which I think some other people might find fairly useful. ;)\r\n\r\n```python\r\nfrom contextlib import contextmanager\r\nimport subprocess\r\n\r\n@contextmanager\r\ndef second_screen():\r\n    try:\r\n        r_code, s_code = (\r\n            subprocess.getoutput(\r\n                r\"infocmp -1 | grep 'rmcup\\|smcup' | sed 's/.*=\\(.*\\),/\\1/'\"\r\n            )\r\n            .replace(\"\\\\E\", \"\\033\")\r\n            .split(\"\\n\")\r\n        )\r\n        try:\r\n            print(s_code + \"\\033[0;0H\", end=\"\")\r\n            yield\r\n        finally:\r\n            print(r_code, end=\"\")\r\n            return\r\n    except:\r\n        yield\r\n```\r\n\r\nI tried my hand at making it work with multiple different terminals by using `infocmp` to findout the proper escape sequence.\r\n\r\nI am unsure if this is something that is considered inside the scope of this library, but imho I think it would by a great addition. I think the best way to integrate this into the API would be to add it as a member of the `Console`-class to enable the following usage:\r\n\r\n```python\r\nfrom rich.console import Console\r\n\r\nconsole = Console()\r\n\r\nwith console.second_screen():\r\n    console.print(\"It works!\", style=\"bold green\")\r\n```\r\n\r\nEDIT: For me the escape sequences turn out to be:\r\n```python\r\ns_code = '\\033[?1049h\\033[22;0;0t'\r\nr_code = '\\033[?1049l\\033[23;0;0t'\r\n```\r\nSo switch to secondary/primary buffer and re-/store icon and window title from/to stack respectively.","closed_by":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"performed_via_github_app":null}