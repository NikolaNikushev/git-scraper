{"url":"https://api.github.com/repos/willmcgugan/rich/issues/63","repository_url":"https://api.github.com/repos/willmcgugan/rich","labels_url":"https://api.github.com/repos/willmcgugan/rich/issues/63/labels{/name}","comments_url":"https://api.github.com/repos/willmcgugan/rich/issues/63/comments","events_url":"https://api.github.com/repos/willmcgugan/rich/issues/63/events","html_url":"https://github.com/willmcgugan/rich/pull/63","id":615195601,"node_id":"MDExOlB1bGxSZXF1ZXN0NDE1NTg3OTcz","number":63,"title":"Added code coverage, fixed makefile, cleaned the github workflow","user":{"login":"kkapka","id":9588315,"node_id":"MDQ6VXNlcjk1ODgzMTU=","avatar_url":"https://avatars3.githubusercontent.com/u/9588315?v=4","gravatar_id":"","url":"https://api.github.com/users/kkapka","html_url":"https://github.com/kkapka","followers_url":"https://api.github.com/users/kkapka/followers","following_url":"https://api.github.com/users/kkapka/following{/other_user}","gists_url":"https://api.github.com/users/kkapka/gists{/gist_id}","starred_url":"https://api.github.com/users/kkapka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkapka/subscriptions","organizations_url":"https://api.github.com/users/kkapka/orgs","repos_url":"https://api.github.com/users/kkapka/repos","events_url":"https://api.github.com/users/kkapka/events{/privacy}","received_events_url":"https://api.github.com/users/kkapka/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-05-09T15:07:25Z","updated_at":"2020-05-13T20:37:36Z","closed_at":"2020-05-13T20:35:39Z","author_association":"NONE","active_lock_reason":null,"pull_request":{"url":"https://api.github.com/repos/willmcgugan/rich/pulls/63","html_url":"https://github.com/willmcgugan/rich/pull/63","diff_url":"https://github.com/willmcgugan/rich/pull/63.diff","patch_url":"https://github.com/willmcgugan/rich/pull/63.patch"},"body":"## Type of changes\r\n\r\n- [ ] Bug fix\r\n- [ ] New feature\r\n- [ ] Documentation / docstrings\r\n- [x] Tests\r\n- [x] Other\r\n\r\n## Checklist\r\n\r\n- [ ] I've run the latest [black](https://github.com/ambv/black) with default args on new code.\r\n- [x] I've updated CHANGELOG.md and CONTRIBUTORS.md where appropriate.\r\n- [ ] I've added tests for new code.\r\n- [x] I accept that @willmcgugan may be pedantic in the code review.\r\n\r\n## Description\r\n\r\n**Why?**\r\n\r\nI tried to write unit tests for code coverage gaps. Unfortunately, the test target in makefile was not working, also I didn't know how to build an app locally on my laptop. So I decided to fix these problems\r\n\r\n**How?**\r\n\r\n- I made a `build` target in `Makefile` to allow everyone to build the app easily (I called that target in GH workflow). \r\n- I fixed a test target by adding `pytest-cov` dependency. \r\n- I fixed the dependency `sphinx-rtd-theme` for docs generation. \r\n- I split requirements into 'target' files and I put them into `requirements` directory.\r\n- I made a package from the tests directory to allow counting code coverage for the source code (And fixed imports of local modules in the tests)\r\n- I added `codecov` step for GH workflow and after merge to `master` we can add badge for code coverage in the `README.md` :)\r\n\r\n**Result?**\r\n\r\n- GH workflows should pass on three python versions\r\n![image](https://user-images.githubusercontent.com/9588315/81477296-51a6a400-9217-11ea-8bb4-adb53516e36e.png)\r\n\r\n- We can see the codecov step and code coverage report\r\n![image](https://user-images.githubusercontent.com/9588315/81477310-671bce00-9217-11ea-9edd-bfe2ed66b36c.png)\r\n\r\n**Future?**\r\n\r\n- After merge to master we can add `codecov` bage to `README.md`","closed_by":{"login":"kkapka","id":9588315,"node_id":"MDQ6VXNlcjk1ODgzMTU=","avatar_url":"https://avatars3.githubusercontent.com/u/9588315?v=4","gravatar_id":"","url":"https://api.github.com/users/kkapka","html_url":"https://github.com/kkapka","followers_url":"https://api.github.com/users/kkapka/followers","following_url":"https://api.github.com/users/kkapka/following{/other_user}","gists_url":"https://api.github.com/users/kkapka/gists{/gist_id}","starred_url":"https://api.github.com/users/kkapka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkapka/subscriptions","organizations_url":"https://api.github.com/users/kkapka/orgs","repos_url":"https://api.github.com/users/kkapka/repos","events_url":"https://api.github.com/users/kkapka/events{/privacy}","received_events_url":"https://api.github.com/users/kkapka/received_events","type":"User","site_admin":false},"performed_via_github_app":null}