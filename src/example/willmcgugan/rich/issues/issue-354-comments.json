[{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/704791338","html_url":"https://github.com/willmcgugan/rich/pull/354#issuecomment-704791338","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/354","id":704791338,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDc5MTMzOA==","user":{"login":"codecov[bot]","id":22429695,"node_id":"MDM6Qm90MjI0Mjk2OTU=","avatar_url":"https://avatars2.githubusercontent.com/in/254?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov%5Bbot%5D","html_url":"https://github.com/apps/codecov","followers_url":"https://api.github.com/users/codecov%5Bbot%5D/followers","following_url":"https://api.github.com/users/codecov%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/codecov%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/codecov%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/codecov%5Bbot%5D/repos","events_url":"https://api.github.com/users/codecov%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/codecov%5Bbot%5D/received_events","type":"Bot","site_admin":false},"created_at":"2020-10-07T08:50:04Z","updated_at":"2020-10-07T08:57:00Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/willmcgugan/rich/pull/354?src=pr&el=h1) Report\n> Merging [#354](https://codecov.io/gh/willmcgugan/rich/pull/354?src=pr&el=desc) into [master](https://codecov.io/gh/willmcgugan/rich/commit/95b6a3a4f467af2b0b70fa17e358660190d65f3a?el=desc) will **not change** coverage.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/willmcgugan/rich/pull/354/graphs/tree.svg?width=650&height=150&src=pr&token=gpwvEeKjff)](https://codecov.io/gh/willmcgugan/rich/pull/354?src=pr&el=tree)\n\n```diff\n@@           Coverage Diff           @@\n##           master     #354   +/-   ##\n=======================================\n  Coverage   99.11%   99.11%           \n=======================================\n  Files          50       50           \n  Lines        4308     4308           \n=======================================\n  Hits         4270     4270           \n  Misses         38       38           \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| #unittests | `99.11% <ø> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/willmcgugan/rich/pull/354?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/willmcgugan/rich/pull/354?src=pr&el=footer). Last update [e5117b0...5a9ca66](https://codecov.io/gh/willmcgugan/rich/pull/354?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/704805217","html_url":"https://github.com/willmcgugan/rich/pull/354#issuecomment-704805217","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/354","id":704805217,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDgwNTIxNw==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-10-07T09:14:59Z","updated_at":"2020-10-07T09:14:59Z","author_association":"OWNER","body":"`poetry install` does an editable install.\r\n\r\nTested with a fresh venv, and it works fine. rich.__file__ points to the local dir, not to site packages.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/704809761","html_url":"https://github.com/willmcgugan/rich/pull/354#issuecomment-704809761","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/354","id":704809761,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDgwOTc2MQ==","user":{"login":"ssbarnea","id":102495,"node_id":"MDQ6VXNlcjEwMjQ5NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/102495?v=4","gravatar_id":"","url":"https://api.github.com/users/ssbarnea","html_url":"https://github.com/ssbarnea","followers_url":"https://api.github.com/users/ssbarnea/followers","following_url":"https://api.github.com/users/ssbarnea/following{/other_user}","gists_url":"https://api.github.com/users/ssbarnea/gists{/gist_id}","starred_url":"https://api.github.com/users/ssbarnea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssbarnea/subscriptions","organizations_url":"https://api.github.com/users/ssbarnea/orgs","repos_url":"https://api.github.com/users/ssbarnea/repos","events_url":"https://api.github.com/users/ssbarnea/events{/privacy}","received_events_url":"https://api.github.com/users/ssbarnea/received_events","type":"User","site_admin":false},"created_at":"2020-10-07T09:23:02Z","updated_at":"2020-10-07T09:23:02Z","author_association":"CONTRIBUTOR","body":"I would have said the same yesterday when it worked like you said. Still, this morning I started to wonder why it no longer works.\r\n\r\nI should mention that, by default, I do not have a virtualenv/venv enabled.\r\n\r\nI tried creating a venv and did the same test and it worked. This may explain why it also worked for you. Try to run it when you do not have any venv active.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/704814178","html_url":"https://github.com/willmcgugan/rich/pull/354#issuecomment-704814178","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/354","id":704814178,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDgxNDE3OA==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-10-07T09:30:37Z","updated_at":"2020-10-07T09:30:37Z","author_association":"OWNER","body":"It wouldn't work for me anyway. Py27 is still the default in MacOS\r\n\r\nRegardless, installing in your system Python is not a good idea. And I don't want to muddy the waters with two ways of installing it for development.\r\n\r\nIf you have identified a problem with installs, you might want to post an issue on poetry repos.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/704832503","html_url":"https://github.com/willmcgugan/rich/pull/354#issuecomment-704832503","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/354","id":704832503,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDgzMjUwMw==","user":{"login":"ssbarnea","id":102495,"node_id":"MDQ6VXNlcjEwMjQ5NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/102495?v=4","gravatar_id":"","url":"https://api.github.com/users/ssbarnea","html_url":"https://github.com/ssbarnea","followers_url":"https://api.github.com/users/ssbarnea/followers","following_url":"https://api.github.com/users/ssbarnea/following{/other_user}","gists_url":"https://api.github.com/users/ssbarnea/gists{/gist_id}","starred_url":"https://api.github.com/users/ssbarnea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssbarnea/subscriptions","organizations_url":"https://api.github.com/users/ssbarnea/orgs","repos_url":"https://api.github.com/users/ssbarnea/repos","events_url":"https://api.github.com/users/ssbarnea/events{/privacy}","received_events_url":"https://api.github.com/users/ssbarnea/received_events","type":"User","site_admin":false},"created_at":"2020-10-07T10:04:10Z","updated_at":"2020-10-07T10:04:10Z","author_association":"CONTRIBUTOR","body":"This PR has nothing to do with poetry itself, it does fix a packaging bug in this project, one that is very easy to spot: \"setuptools\" is a build time dependency that was missed to be added to `build-system` section.\r\n\r\nhttps://www.python.org/dev/peps/pep-0517/ should explain it better, [poetry-core](https://www.python.org/dev/peps/pep-0517/) is relying on it.\r\n\r\nStill, poetry-core itself does not directly depend on setuptools, but setuptools is needed for performing editable installs, that is a known limitation. Keep in mind that this requirement is a build-time, adding it there does not install it in destination environment. The build system has uses a temporary virtualenv solely for building.\r\n\r\n**Why do you prefer to force a developer to install poetry?**\r\n\r\n\r\nI made another test using native python3 from macos:\r\n```\r\n$ /usr/bin/python3 -m poetry install\r\nInstalling dependencies from lock file\r\n\r\nNo dependencies to install or update\r\n\r\nInstalling the current project: rich (8.0.0)\r\n\r\n$ /usr/bin/python3 -m pip freeze|grep rich\r\nFAIL: 1\r\n\r\n# test that rich package was installed (avoid accidental import of rich from cwd!)\r\n$ cd / && /usr/bin/python3 -c \"import rich\"                                                                               Traceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nModuleNotFoundError: No module named 'rich'\r\n```\r\n\r\nI tested even on CentOS 8 using default system python, some issue! \r\n\r\nPoetry does not install the package to current python environment unless that one is a virtualenv.\r\n\r\nIt does create a temp virtualenv but clearly that is something very different than installing a package.\r\n\r\nThe only reason why you may be able to succeed running \"python -c 'import rich'\" is due to the fact there is a rich folder at the root level of repo project, but that is not an installed package. I seen few others strongly recommending keeping packages in a subdirectory like src/ or lib/ in order to avoid accidental spills but I only started to do it this myself recently)","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/704849274","html_url":"https://github.com/willmcgugan/rich/pull/354#issuecomment-704849274","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/354","id":704849274,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNDg0OTI3NA==","user":{"login":"willmcgugan","id":554369,"node_id":"MDQ6VXNlcjU1NDM2OQ==","avatar_url":"https://avatars3.githubusercontent.com/u/554369?v=4","gravatar_id":"","url":"https://api.github.com/users/willmcgugan","html_url":"https://github.com/willmcgugan","followers_url":"https://api.github.com/users/willmcgugan/followers","following_url":"https://api.github.com/users/willmcgugan/following{/other_user}","gists_url":"https://api.github.com/users/willmcgugan/gists{/gist_id}","starred_url":"https://api.github.com/users/willmcgugan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willmcgugan/subscriptions","organizations_url":"https://api.github.com/users/willmcgugan/orgs","repos_url":"https://api.github.com/users/willmcgugan/repos","events_url":"https://api.github.com/users/willmcgugan/events{/privacy}","received_events_url":"https://api.github.com/users/willmcgugan/received_events","type":"User","site_admin":false},"created_at":"2020-10-07T10:36:50Z","updated_at":"2020-10-07T10:36:50Z","author_association":"OWNER","body":"Like I said, it's a bad idea to do an editable install in system python.\r\n\r\nUse a venv, it works regardless of current working directory.\r\n\r\nPlease read https://python-poetry.org/docs/basic-usage/ Particularly the section on virtual envs.","performed_via_github_app":null},{"url":"https://api.github.com/repos/willmcgugan/rich/issues/comments/705047245","html_url":"https://github.com/willmcgugan/rich/pull/354#issuecomment-705047245","issue_url":"https://api.github.com/repos/willmcgugan/rich/issues/354","id":705047245,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTA0NzI0NQ==","user":{"login":"ssbarnea","id":102495,"node_id":"MDQ6VXNlcjEwMjQ5NQ==","avatar_url":"https://avatars3.githubusercontent.com/u/102495?v=4","gravatar_id":"","url":"https://api.github.com/users/ssbarnea","html_url":"https://github.com/ssbarnea","followers_url":"https://api.github.com/users/ssbarnea/followers","following_url":"https://api.github.com/users/ssbarnea/following{/other_user}","gists_url":"https://api.github.com/users/ssbarnea/gists{/gist_id}","starred_url":"https://api.github.com/users/ssbarnea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssbarnea/subscriptions","organizations_url":"https://api.github.com/users/ssbarnea/orgs","repos_url":"https://api.github.com/users/ssbarnea/repos","events_url":"https://api.github.com/users/ssbarnea/events{/privacy}","received_events_url":"https://api.github.com/users/ssbarnea/received_events","type":"User","site_admin":false},"created_at":"2020-10-07T16:21:46Z","updated_at":"2020-10-07T16:21:46Z","author_association":"CONTRIBUTOR","body":"Just to be clear: these is \"user level\" install, not root level. Newer versions of pip finally made the switch of avoiding to install on system python by default, installed packages will go by default to `~/.local/lib/python3.x/`, which also takes precedence over system packages. -- that user stuff is nothing new, probably is a decade old.","performed_via_github_app":null}]